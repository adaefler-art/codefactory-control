# AFU-9 v0.2 Environment Variables
# 
# ⚠️  SECURITY NOTICE: This file is for LOCAL DEVELOPMENT ONLY
# In production (ECS/Lambda), secrets are loaded from AWS Secrets Manager
# See SECURITY.md for complete secret management documentation
#
# Copy this file to .env and fill in your values
# The .env file is gitignored and will never be committed

# ========================================
# GitHub Configuration
# ========================================
# GitHub App credentials (server-to-server authentication)
# In production: stored in AWS Secrets Manager as 'afu9/github/app'
# For local dev only - DO NOT commit these values to git
# Get these from your GitHub App settings: https://github.com/settings/apps

# GitHub App ID (visible in app settings)
GITHUB_APP_ID=123456

# GitHub App Private Key (PEM format)
# Paste the full PEM content from your GitHub App settings.
# Newlines can be actual newlines or \n.
# NOTE: This example intentionally does not include PEM BEGIN/END markers to avoid triggering secret scanners.
GITHUB_APP_PRIVATE_KEY_PEM="__PASTE_GITHUB_APP_PRIVATE_KEY_PEM_HERE__"

# GitHub App Webhook Secret (for webhook signature verification)
GITHUB_APP_WEBHOOK_SECRET=your_webhook_secret_here

# Optional: Override default secret ID (default: afu9/github/app)
# GITHUB_APP_SECRET_ID=afu9/github/app

# Repository configuration (for Control Center default target)
GITHUB_OWNER=your-org
GITHUB_REPO=your-repo

# Repository Access Policy (E89.1 - Repo Read-Only Policy)
# JSON allowlist for repositories that can be accessed via GitHub App auth
# REQUIRED in production. If not set, uses development default (codefactory-control repo only)
# 
# Format: {"allowlist":[{"owner":"<org>","repo":"<repo>","branches":["<branch>","<pattern>/*"]}]}
# - owner/repo: Normalized to lowercase for case-insensitive matching
# - branches: Exact match or glob patterns (e.g., "release/*", "hotfix/*")
# - branches is optional, defaults to ["main"] if not specified
# 
# Example (single repo):
# GITHUB_REPO_ALLOWLIST={"allowlist":[{"owner":"adaefler-art","repo":"codefactory-control","branches":["main","develop","release/*"]}]}
#
# Example (multiple repos):
# GITHUB_REPO_ALLOWLIST={"allowlist":[{"owner":"adaefler-art","repo":"codefactory-control","branches":["main","develop","release/*"]},{"owner":"test-org","repo":"test-repo","branches":["main"]}]}
GITHUB_REPO_ALLOWLIST=

# ========================================
# LLM API Keys
# ========================================
# Multiple LLM providers are supported. Configure at least one.
# In production: stored in AWS Secrets Manager as 'afu9/llm'

# OpenAI (GPT models: gpt-4, gpt-4-turbo, gpt-3.5-turbo)
# Get your API key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-key-here

# Anthropic (Claude models: claude-3-opus, claude-3-sonnet, claude-3-haiku)
# Get your API key at: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# DeepSeek (DeepSeek models, OpenAI-compatible API)
# Get your API key at: https://platform.deepseek.com/
DEEPSEEK_API_KEY=sk-your-deepseek-key-here

# ========================================
# AWS Configuration
# ========================================
# Region for AWS services (Secrets Manager, ECS, RDS, etc.)
AWS_REGION=eu-central-1

# Local development AWS credentials (optional, for testing AWS integrations)
# In production: ECS tasks and Lambdas use IAM roles (no keys needed)
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key

# ========================================
# Database Configuration
# ========================================
# For local development with docker-compose
# In production: stored in AWS Secrets Manager as 'afu9/database'
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=afu9
DATABASE_USER=afu9_admin
DATABASE_PASSWORD=dev_password

# Alternative: Full connection URL format
# DATABASE_URL=postgresql://afu9_admin:dev_password@localhost:5432/afu9

# ========================================
# Application Configuration
# ========================================
# Node environment (development, production)
NODE_ENV=development

# Control Center port (default: 3000)
PORT=3000

# Public URL for the application (REQUIRED for production/staging)
# Used by Deploy Status Monitor for self-health checks
# Development: http://localhost:3000 (default)
# Staging: https://control-center.stage.afu9.cloud
# Production: https://control-center.afu9.cloud
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Production Environment Access Control (Issue 3)
# Enable/disable production deployments and write operations (true/false)
# When false: All prod deploys blocked, prod write endpoints return 403
# Default: false (fail-closed for cost reduction)
# Set to 'true' only when explicitly re-enabling production
ENABLE_PROD=false

# Debug mode: Enable verbose logging for troubleshooting (true/false)
# When enabled, outputs detailed debug logs for workflows, agents, and MCP calls
# Default: false in production, true in development
AFU9_DEBUG_MODE=true

# INTENT Agent: Enable guardrailed LLM assistant for INTENT Console (true/false)
# When disabled, INTENT endpoints return 404 (fail-closed)
# Default: false in production, can be true in staging
# Requires OPENAI_API_KEY to be configured
AFU9_INTENT_ENABLED=false

# MCP Server endpoints (for local development)
MCP_GITHUB_ENDPOINT=http://localhost:3001
MCP_DEPLOY_ENDPOINT=http://localhost:3002
MCP_OBSERVABILITY_ENDPOINT=http://localhost:3003
